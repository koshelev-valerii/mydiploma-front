!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";t.a={ALREADY_EXIST_ERROR:"Такой пользователь уже есть",WRONG_EMAIL_ERROR:"Адрес почты указан в неверном формате",MISSING_VALUE_ERROR:"Необходимо заполнить поле",MISSING_SEARCH_VALUE_ERROR:"Нужно ввести ключевое слово",TYPE_SEARCH_VALUE:"Введите тему новости",PASSWORD_LENGTH_ERROR:"Пароль должен быть минимум 8 символов",NAME_LENGTH_ERROR:"Имя должно быть от 2 до 30 символов",NO_RESULT:"Ничего не найдено",NO_ARTICLES:"нет",GET_RESULT_ERROR:"Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз",NO_INTERNET:"Проблема с Интернет-соединением"}},function(e,t,n){"use strict";t.a={SERVER_URL:"https://api.mydiploma.website",NEWSAPI_URL:"https://newsapi.org/v2/everything",NEWSAPI_TOKEN:"436d782cf30e4996a880aaac9b60e14c",ESCAPE_CODE:27,ONE_DAY:864e5,LAST_DAY:7,CARD_AMOUNT:3}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return w})),n.d(t,"g",(function(){return N})),n.d(t,"c",(function(){return V})),n.d(t,"f",(function(){return K})),n.d(t,"d",(function(){return re})),n.d(t,"a",(function(){return me}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers=[],this.setListeners=this.setListeners.bind(this)}var t,n,o;return t=e,(n=[{key:"_saveListeners",value:function(e){var t=this;e.forEach((function(e){var n=e.event,r=e.element,o=e.callback.bind(t);t._handlers.push({event:n,element:r,bindedCallback:o})}))}},{key:"_addEventListeners",value:function(){var e=this;this._handlers.forEach((function(t){var n=t.event,r=t.element,o=t.bindedCallback;"function"==typeof o&&("window"===r?window.addEventListener(n,o):"element"===r?e._element.addEventListener(n,o):e._element.querySelector(r).addEventListener(n,o))}))}},{key:"setListeners",value:function(e){this._saveListeners(e),this._addEventListeners()}},{key:"_removeListeners",value:function(){var e=this;this._handlers.forEach((function(t){var n=t.event,r=t.element,o=t.bindedCallback;"window"===r?window.removeEventListener(n,o):"element"===r?e._element.removeEventListener(n,o):e._element.querySelector(r).removeEventListener(n,o)}))}}])&&r(t.prototype,n),o&&r(t,o),e}(),i=n(0);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=i.a.MISSING_VALUE_ERROR,p=i.a.PASSWORD_LENGTH_ERROR,m=i.a.NAME_LENGTH_ERROR,h=i.a.WRONG_EMAIL_ERROR,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=f(t);if(l()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this))._element=document.querySelector(e).content.cloneNode(!0).querySelector(".form"),t.setSubmitError=t.setSubmitError.bind(s(t)),t.clear=t.clear.bind(s(t)),t.setListeners([{event:"input",element:"element",callback:t._validateHandler}]),t}return n=c,o=[{key:"_inputHandler",value:function(e){var t=e.target.nextElementSibling;e.target.validity.valueMissing?t.textContent=y:e.target.validity.tooShort&&"password"===e.target.name?t.textContent=p:e.target.validity.tooShort?t.textContent=m:e.target.validity.patternMismatch?t.textContent=h:t.textContent=""}}],(r=[{key:"toggleLockForm",value:function(e){var t=this,n=Array.from(this._element.elements);e?(this._clearErrors(),n.forEach((function(e){e.setAttribute("disabled",!0),"submit"===e.name&&t._element.elements.submit.classList.remove("popup__form-button_active")}))):n.forEach((function(e){e.removeAttribute("disabled"),"submit"===e.name&&t._element.elements.submit.classList.add("popup__form-button_active")}))}},{key:"getInputValues",value:function(){var e={};return Array.from(this._element.elements).forEach((function(t){"submit"!==t.name&&(e[t.name]=t.value)})),e}},{key:"setSubmitError",value:function(e){this._element.querySelector(".error-message_submit").textContent=e}},{key:"clear",value:function(){this._element.reset(),this._clearErrors()}},{key:"_clearErrors",value:function(){this._element.querySelectorAll(".error-message").forEach((function(e){e.textContent=""}))}},{key:"_checkFormValid",value:function(){return!!this._element.checkValidity()}},{key:"_validateHandler",value:function(e){c._inputHandler(e),this._checkFormValid()?(this._element.elements.submit.removeAttribute("disabled"),this._element.elements.submit.classList.add("popup__form-button_active")):(this._element.elements.submit.setAttribute("disabled",!0),this._element.elements.submit.classList.remove("popup__form-button_active"))}},{key:"element",get:function(){return this._element}}])&&u(n.prototype,r),o&&u(n,o),c}(o);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=n(1).a.ESCAPE_CODE,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=O(t);if(S()){var r=O(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return g(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this))._element=e,t._content=t._element.querySelector(".popup__content"),t._contentHandler=null,t.isOpened=!1,t._saveListeners([{event:"mousedown",element:"element",callback:t._closeHandler},{event:"keyup",element:"window",callback:t._closeHandler}]),t}return n=c,(r=[{key:"setContent",value:function(e,t){this._contentHandler=t,this._content.appendChild(e)}},{key:"open",value:function(e,t){document.body.style.overflow="hidden",this._element.classList.add("popup_is-opened"),this.setContent(e,t),this._addEventListeners(),this.isOpened=!0}},{key:"clearContent",value:function(){"function"==typeof this._contentHandler&&this._contentHandler(),document.body.style.overflow="",this._content.lastChild.remove()}},{key:"close",value:function(){this.clearContent(),this._element.classList.remove("popup_is-opened"),document.body.style.overflow="",this._removeListeners(),this.isOpened=!1}},{key:"_closeHandler",value:function(e){(e.keyCode===k||e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}}])&&v(n.prototype,r),o&&v(n,o),c}(o);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=i.a.MISSING_SEARCH_VALUE_ERROR,T=i.a.TYPE_SEARCH_VALUE,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=j(t);if(x()){var r=j(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return L(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this))._element=e,t._input=t._element.querySelector(".field__input"),t._button=t._element.querySelector(".field__button"),t.setListeners([{event:"input",element:"element",callback:t._validateHandler}]),t}return n=c,(r=[{key:"toggleLockForm",value:function(){var e=this;Array.from(this._element.elements).forEach((function(t){t.toggleAttribute("disabled"),"submit"===t.name&&e._element.elements.submit.classList.toggle("field__button_active")}))}},{key:"_validateHandler",value:function(e){e.target.validity.valueMissing?this._input.placeholder=A:this._input.placeholder=T,this._element.checkValidity()?(this._button.removeAttribute("disabled"),this._button.classList.add("field__button_active")):(this._button.setAttribute("disabled",!0),this._button.classList.remove("field__button_active"))}},{key:"input",get:function(){return this._input.value}}])&&C(n.prototype,r),o&&C(n,o),c}(o);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=H(t);if(D()){var r=H(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return q(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this))._element=e,n._isArticlesUrl=t,n._articlesLink=n._element.querySelector(".header__list-item_articles"),n._articlesLink.style.display="none",n._buttonIcon=n._element.querySelector(".header__button-icon"),n._buttonText=n._element.querySelector(".header__button-text"),n._menu=n._element.querySelector(".header__menu"),n._list=n._element.querySelector(".header__list"),n._overlay=n._menu.querySelector(".header__menu-overlay"),n}return n=c,(r=[{key:"render",value:function(e){e.isLoggedIn?(this._articlesLink.style.display="inline-block",this._buttonIcon.style.display="block",this._buttonText.textContent=e.userName):(this._articlesLink.style.display="none",this._buttonIcon.style.display="none",this._buttonText.textContent="Авторизоваться")}},{key:"checkMenuState",value:function(){return!(!this._menu.classList.contains("header__menu_is-active_white")&&!this._menu.classList.contains("header__menu_is-active_black"))}},{key:"toggleMenuButton",value:function(){this._isArticlesUrl?this._menu.classList.toggle("header__menu_is-active_black"):this._menu.classList.toggle("header__menu_is-active_white")}},{key:"toggleMenu",value:function(){this._isArticlesUrl||this._element.classList.toggle("header_state_dropdown"),this._list.classList.toggle("header__list_is-active"),this._overlay.classList.toggle("header__menu-overlay_is-active"),document.body.classList.toggle("body_is-hidden")}}])&&I(n.prototype,r),o&&I(n,o),c}(o);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=F(t);if(z()){var r=F(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return J(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this))._element=e,n._isArticles=t,n._message=n._element.querySelector(".results__message"),n._cardlist=n._element.querySelector(".results__list"),n._preloader=n._element.querySelector(".articles-list__circle-preloader"),n.cardsData=null,n.counter=null,n.renderedCards=[],n._initializeSearchResultsElems(),n.setMessageError=n.setMessageError.bind(W(n)),n}return n=c,(r=[{key:"_initializeSearchResultsElems",value:function(){this._isArticles||(this._moreCards=this._element.querySelector(".results__button"),this._noResults=this._element.querySelector(".results__no-results"))}},{key:"show",value:function(){this._isArticles||(this.toggleNoResults(!1),this.toggleMoreCards(!1)),this._message.textContent="",this.togglePreloader(!0),this._element.classList.add("results_is-active")}},{key:"hide",value:function(){this._element.classList.remove("results_is-active")}},{key:"insertElement",value:function(e){this._cardlist.append(e)}},{key:"togglePreloader",value:function(e){e?this._preloader.classList.add("preloader_is-active"):this._preloader.classList.remove("preloader_is-active")}},{key:"toggleMoreCards",value:function(e){e?this._moreCards.classList.add("results__button_active"):this._moreCards.classList.remove("results__button_active")}},{key:"toggleNoResults",value:function(e){e?this._noResults.classList.add("results__no-results_is-active"):this._noResults.classList.remove("results__no-results_is-active")}},{key:"setMessageError",value:function(e){console.log(e),this._message.textContent=e}}])&&B(n.prototype,r),o&&B(n,o),c}(o);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=te(t);if(ee()){var r=te(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Z(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this))._element=document.querySelector(t).content.cloneNode(!0).querySelector(".card__wrapper"),n._data=e,n._id=null,n._cardEventCallback=null,n._textWrapper=n._element.querySelector(".card__text-wrapper"),n._setData(n._data),n.truncateCardText=n.truncateCardText.bind($(n)),setTimeout(n.truncateCardText,10),n}return n=c,o=[{key:"_setFormattedDate",value:function(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][t.getMonth()],", ").concat(t.getFullYear())}}],(r=[{key:"truncateCardText",value:function(){var e=this._textWrapper.clientWidth*this._textWrapper.clientHeight/245;this._element.querySelector(".card__text").textContent="".concat(this._data.text.substr(0,e),"...")}},{key:"remove",value:function(){this._removeListeners(),this._element.remove()}},{key:"_setData",value:function(e){this._element.querySelector(".card__source").textContent=e.source,this._element.querySelector(".card__title").textContent=e.title,this._element.querySelector(".card__date").textContent=c._setFormattedDate(e.date),this._element.querySelector(".card__text").textContent=e.text,this._element.querySelector(".card__image").style.backgroundImage="url('".concat(e.image,"')"),this._element.querySelector(".card__keyword")&&(this._element.querySelector(".card__keyword").textContent=e.keyword)}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"node",get:function(){return this._element}}])&&Q(n.prototype,r),o&&Q(n,o),c}(o),oe={NOMINATIVE_CASE:" сохранённая статья",GENITIVE_CASE:" сохранённые статьи",ACCUSATIVE_CASE:" сохранённых статей"};function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=oe.NOMINATIVE_CASE,_e=oe.GENITIVE_CASE,ye=oe.ACCUSATIVE_CASE,pe=i.a.NO_ARTICLES,me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=se(t);if(ae()){var r=se(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ue(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this))._element=e,t._counterDOM=t._element.querySelector(".article-info__counter"),t._username=t._element.querySelector(".article-info__name"),t._text=t._element.querySelector(".article-info__text"),t._keywords=t._text.querySelector(".article-info__keywords"),t._saved=t._element.querySelector(".article-info__saved"),t._summary={},t.counter=0,t}return n=c,o=[{key:"_setCases",value:function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}}],(r=[{key:"setUsername",value:function(e){this._username.textContent=e}},{key:"createSummary",value:function(e){this._summary[e]?this._summary[e]+=1:this._summary[e]=1}},{key:"changeSummary",value:function(e){this.counter-=1,this._summary[e]-=1,this._summary[e]||delete this._summary[e],this.sortSummary()}},{key:"sortSummary",value:function(){var e=this,t={};Object.keys(this._summary).sort((function(t,n){return e._summary[n]-e._summary[t]})).forEach((function(n){t[n]=e._summary[n]})),this._summary=t,this._render()}},{key:"_setInfo",value:function(){var e,t=Object.keys(this._summary);return t.length>0&&t.length<=3&&(e=t.join(", ")),t.length>3&&(e="".concat(t[0],", ").concat(t[1]," и ").concat(t.length-2," другим")),e}},{key:"_render",value:function(){0===this.counter?(this._counterDOM.textContent=pe,this._text.style.display="none"):(this._counterDOM.textContent=this.counter,this._keywords.textContent=this._setInfo(),this._text.style.display="block"),this._saved.textContent=c._setCases(this.counter,[fe,_e,ye])}}])&&ce(n.prototype,r),o&&ce(n,o),c}(o)},function(e,t,n){"use strict";t.a=function(e,t,n){t?"function"==typeof e.text?e.text().then((function(e){return t(JSON.parse(e).message)})):"Failed to fetch"===e.message?t(n):t(e):console.log(e)}},function(e,t,n){"use strict";var r=n(3);t.a=function(e,t,n){e.getUserData().then((function(e){t.render({isLoggedIn:!0,userName:e.data.name}),n&&n.setUsername(e.data.name)})).catch((function(e){Object(r.a)(e)}))}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url}var t,n,o;return t=e,o=[{key:"getJSONResponse",value:function(e){return e.ok?e.json():Promise.reject(e)}}],(n=[{key:"signup",value:function(t){var n=t.name,r=t.email,o=t.password;return fetch("".concat(this._url,"/signup"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:n,email:r,password:o})}).then((function(t){return e.getJSONResponse(t)}))}},{key:"signin",value:function(t){var n=t.email,r=t.password;return fetch("".concat(this._url,"/signin"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:n,password:r})}).then((function(t){return e.getJSONResponse(t)}))}},{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){return e.getJSONResponse(t)}))}},{key:"addBookmark",value:function(t){return fetch("".concat(this._url,"/articles"),{headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))},method:"POST",body:JSON.stringify(t)}).then((function(t){return e.getJSONResponse(t)}))}},{key:"deleteBookmark",value:function(t){return fetch("".concat(this._url,"/articles/").concat(t),{headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))},method:"DELETE"}).then((function(t){return e.getJSONResponse(t)}))}},{key:"getArticles",value:function(){return fetch("".concat(this._url,"/articles"),{headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){return e.getJSONResponse(t)}))}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e,t){!window.matchMedia("(max-width: 660px)").matches&&e.checkMenuState()?(t.isOpened||e.toggleMenu(),e.toggleMenuButton()):window.matchMedia("(max-width: 660px)").matches&&!e.checkMenuState()&&t.isOpened&&e.toggleMenuButton()},o=function(e){!window.matchMedia("(max-width: 660px)").matches&&e.checkMenuState()&&(e.toggleMenu(),e.toggleMenuButton())}},,function(e,t,n){"use strict";n.r(t);n(9);var r=n(1),o=n(0),i=n(5),c=n(2),u=n(4),a=n(3),s=n(6),l=o.a.GET_RESULT_ERROR,f=new i.a({url:r.a.SERVER_URL}),_=new c.c(document.querySelector(".header"),!0),y=new c.f(document.querySelector(".results"),!0),p=new c.a(document.querySelector(".article-info"));window.addEventListener("resize",(function(){return Object(s.b)(_)})),localStorage.getItem("token")?Object(u.a)(f,_,p):window.location.href="../index.html";_.setListeners([{event:"click",element:".header__button",callback:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),window.location.href="../index.html"}(e)}},{event:"click",element:".header__menu",callback:function(e){return function(e){window.matchMedia("(max-width: 660px)").matches&&e.target.classList.contains("header__menu")&&(_.toggleMenuButton(),_.toggleMenu())}(e)}}]);y.show(),f.getArticles().then((function(e){y.togglePreloader(!1),e.data.forEach((function(e){p.createSummary(e.keyword);var t=new c.d(e,".card-bookmark-template");t.setListeners([{event:"click",element:".card__corner-button",callback:function(n){return function(e,t,n){e.preventDefault(),e.stopPropagation(),window.confirm("Вы действительно хотите удалить эту новость?")&&f.deleteBookmark(n._id).then((function(){p.changeSummary(n.keyword),t.remove(),y.renderedCards.pop(),0===y.renderedCards.length&&y.hide()})).catch((function(e){Object(a.a)(e)}))}(n,t,e)}},{event:"click",element:".card",callback:function(){window.open(e.link,"_blank")}},{event:"resize",element:"window",callback:t.truncateCardText}]),y.renderedCards.push(t),y.insertElement(t.node),p.counter+=1})),p.sortSummary()})).catch((function(e){y.togglePreloader(!1),Object(a.a)(e,y.setMessageError,l)}))},function(e,t,n){}]);